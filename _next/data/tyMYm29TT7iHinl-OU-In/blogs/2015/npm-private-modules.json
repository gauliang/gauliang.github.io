{"pageProps":{"id":["posts","2015","npm-private-modules"],"post":{"id":["posts","2015","npm-private-modules"],"contentHtml":"<p>你可以使用 NPM 命令行工具来管理你在 NPM 仓库的私有模块代码，这使得在项目中使用公共模块变的更加方便。</p>\n<h2 id=\"hash-开始前的工作\">开始前的工作</h2>\n<p>你需要一个 2.7.0 以上版本的 npm ，并且需要有一个可以登陆 npm 仓库的账号。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g npmnpm login\n</code></pre></div>\n<h2 id=\"hash-软件包设置\">软件包设置</h2>\n<p>所有的私有模块都是 scoped package 的。</p>\n<p>scope 是 npm 的新特性。如果一个模块的名字以 \"@\" 开始，那么他就是一个 scoped package。scope 就是\"@\"与\"/\"之间的部分。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">@scope/project-name\n</code></pre></div>\n<p>当你注册私有模块到一个用户下时，你的 scope 就是当前用户的用户名。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">@username/project-name\n</code></pre></div>\n<p>如果要使用 npm init 初始化一个软件包，你可以通过自定义 --scope 选项设置你的 scope</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init --scope<span class=\"token operator\">=</span><span class=\"token operator\">&#x3C;</span>your_scope<span class=\"token operator\">></span>\n</code></pre></div>\n<p>如果你在大多数时候使用的 scope 都是相同的，可以设置一个默认的 scope ，这样在我们初始化的时候会自动使用该 scope。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> config <span class=\"token builtin class-name\">set</span> scope <span class=\"token operator\">&#x3C;</span>your_scope<span class=\"token operator\">></span>\n</code></pre></div>\n<h2 id=\"hash-发布模块\">发布模块</h2>\n<p>发布一个模块的操作是非常简单的</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> publish\n</code></pre></div>\n<p>默认情况下，scoped package 会发布为私有模块，发布为私有模块是需要付费的，费用是每个月 $7 。更详细的信息可参考<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://www.cnblogs.com/kelsen/p/4947859.html\">NPM (node package manager) 入门 - 基础使用</a></p>\n<p>一旦完成发布，你将会在 npm 库站点上看到你的 scoped package，有 private 标志，说明是非公共的模块，他人无法使用。</p>\n<h2 id=\"hash-授权其他成员访问\">授权其他成员访问</h2>\n<p>如果你要授权给其他人使用你的模块，你可以在 package 的权限设置页面设置哪些用户可以拥有 只读或读写权限。也可以通过命令行进行相关设置</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> owner <span class=\"token function\">add</span> <span class=\"token operator\">&#x3C;</span>user<span class=\"token operator\">></span> <span class=\"token operator\">&#x3C;</span>package name<span class=\"token operator\">></span>\n</code></pre></div>\n<p><strong>安装私有模块</strong></p>\n<p>如果要安装私有模块，你必须要有权限访问到要安装的私有模块。安装的时候可以使用 scope package name</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @scope/project-name\n</code></pre></div>\n<p>当你在项目中使用这些代码模块时可以如下使用</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">var project <span class=\"token operator\">=</span> require<span class=\"token punctuation\">(</span><span class=\"token string\">'@scope/project-name'</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h2 id=\"hash-设置私有模块为共有的\">设置私有模块为共有的</h2>\n<p>所有的 scoped packages 默认都是私有状态的，这确保了无关人员不能访问到该模块。也可以修改改模块为 public 状态。</p>\n<div class=\"image-widget\"><img src=\"/attachments/posts/2015/npm-private-modules.files/make-private-ui.gif\" alt=\"\"></div>\n<p>也可以使用命令行进行操作</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> access restricted <span class=\"token operator\">&#x3C;</span>package_name<span class=\"token operator\">></span>\n</code></pre></div>\n<p>这个操作可能需要几分钟才能生效，网站会将该模块从私有列表中删除。</p>\n<h2 id=\"hash-写在后面\">写在后面</h2>\n<p>本文译自 npm 官方文档<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"https://docs.npmjs.com/private-modules/intro\">https://docs.npmjs.com/private-modules/intro</a></p>\n","words":1294,"toc":[{"depth":2,"value":"开始前的工作","id":"hash-开始前的工作"},{"depth":2,"value":"软件包设置","id":"hash-软件包设置"},{"depth":2,"value":"发布模块","id":"hash-发布模块"},{"depth":2,"value":"授权其他成员访问","id":"hash-授权其他成员访问"},{"depth":2,"value":"设置私有模块为共有的","id":"hash-设置私有模块为共有的"},{"depth":2,"value":"写在后面","id":"hash-写在后面"}],"title":"npm 私有模块的管理使用","author":"高国良","type":"posts","series":false,"date":"2015-11-14T16:20:00.791Z","tags":["npm"],"description":"你可以使用 NPM 命令行工具来管理你在 NPM 仓库的私有模块代码，这使得在项目中使用公共模块变的更加方便。 开始前的工作 你需要一个 2.7.0 以上版本的 npm ，并且需要有一个可以登陆 npm 仓库的账号。","draft":false,"cover":false},"prev":{"title":"NPM (node package manager) 入门 - 基础使用","author":"高国良","type":"posts","series":false,"date":1447142760791,"tags":["gulp","npm","semver"],"description":"npm 是 nodejs 的包管理和分发工具。文章从几个方面对如何使用 npm 进行了大致的介绍，希望可以帮助更多对 npm 感兴趣的朋友。主包括如何安装更新配置npm、如何创建及发布软件包、什么是 scope package 等内容，对 npm 的日常使用进行了概要的介绍。文章译自 npmjs.com","draft":false,"cover":false,"path":"/blogs/2015/node-package-manager","slug":"2015/node-package-manager"},"next":{"title":"常用 Gulp 插件汇总 —— 基于 Gulp 的前端集成解决方案（三）","author":"高国良","type":"posts","series":false,"date":1447609800791,"tags":["gulp","npm"],"description":"前两篇文章讨论了 Gulp 的安装部署及基本概念，借助于 Gulp 强大的 插件生态 可以完成很多常见的和不常见的任务。本文主要汇总常用的 Gulp 插件及其基本使用，需要读者对 Gulp 有一个基本的了解。","cover":false,"path":"/blogs/2015/work-with-gulp+summary-of-common-gulp-plug-ins","slug":"2015/work-with-gulp+summary-of-common-gulp-plug-ins"}},"__N_SSG":true}