{"pageProps":{"id":["posts","2014","use-the-integration-image-in-laravel"],"post":{"id":["posts","2014","use-the-integration-image-in-laravel"],"contentHtml":"<h2 id=\"hash-系统需求\">系统需求</h2>\n<ul>\n<li>PHP >= 5.3</li>\n<li>Fileinfo Extension</li>\n<li>GD Library (>=2.0)</li>\n<li>Imagick PHP extension (>=6.5.7)</li>\n</ul>\n<h2 id=\"hash-安装部署-Integration-image\">安装部署 Integration-image</h2>\n<p>在 composer.json [require] 节增加，之后执行 composer update</p>\n<div class=\"remark-highlight\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"intervention/image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.15\"</span>\n</code></pre></div>\n<h2 id=\"hash-Laravel-配置\">Laravel 配置</h2>\n<p>安装部署 Integration/image 完成后，打开配置文件 config/app.php 在相应位置添加代码，然后 Image 类就能自动加载并可供使用了。其功能强大到可以处理你的几乎所有图片处理需求。</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token comment\">//服务提供器</span>\n<span class=\"token string single-quoted-string\">'Intervention\\Image\\ImageServiceProvider'</span>\n\n<span class=\"token comment\">//别名配置</span>\n<span class=\"token string single-quoted-string\">'Image'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Intervention\\Image\\Facades\\Image'</span>\n</code></pre></div>\n<h2 id=\"hash-配置设置\">配置设置</h2>\n<p>默认情况下， <code>Integration/Image</code> 使用PHP的GD库扩展。如果你想切换到 <code>imagick</code>，你可以使用 <code>php artisan</code> 创建一个配置文件以添加相应的配置。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">$ php artisan config:publish intervention/imag\n</code></pre></div>\n<h2 id=\"hash-基本使用\">基本使用</h2>\n<p>这里列出几个基本功能，更详细使用说明请查看相关接口文档。</p>\n<p>1、显示一张图片</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token scope\">Route<span class=\"token punctuation\">::</span></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'/'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n       <span class=\"token variable\">$img</span> <span class=\"token operator\">=</span> <span class=\"token scope\">Image<span class=\"token punctuation\">::</span></span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'foo.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">return</span> <span class=\"token variable\">$img</span><span class=\"token operator\">-></span><span class=\"token function\">response</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>2、读取一个图片文件</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$img</span> <span class=\"token operator\">=</span> <span class=\"token scope\">Image<span class=\"token punctuation\">::</span></span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'foo/bar/baz.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>3、绘制一张图片</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$img</span> <span class=\"token operator\">=</span> <span class=\"token scope\">Image<span class=\"token punctuation\">::</span></span><span class=\"token function\">canvas</span><span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span> <span class=\"token number\">600</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'#ccc'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>4、编辑一张图片</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token variable\">$img</span> <span class=\"token operator\">=</span> <span class=\"token scope\">Image<span class=\"token punctuation\">::</span></span><span class=\"token function\">make</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'foo.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span><span class=\"token number\">320</span><span class=\"token punctuation\">,</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'watermark.png'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n","words":895,"toc":[{"depth":2,"value":"系统需求","id":"hash-系统需求"},{"depth":2,"value":"安装部署 Integration-image","id":"hash-安装部署-Integration-image"},{"depth":2,"value":"Laravel 配置","id":"hash-Laravel-配置"},{"depth":2,"value":"配置设置","id":"hash-配置设置"},{"depth":2,"value":"基本使用","id":"hash-基本使用"}],"title":"在 Laravel 中使用图片处理库 Integration/Image","author":"高国良","type":"posts","series":false,"date":"2014-12-16T17:40:00.791Z","tags":["php","laravel","image"],"description":"Integration/Image 是一个图片处理的库，其功能强大到���以处理你的几乎所有图片处理需求。本文介绍其在laravel框架下的安装与基本使用。","draft":false,"cover":false},"prev":{"title":"让 windows 下的命令行程序 cmd.exe 用起来更顺手","author":"高国良","type":"posts","series":false,"date":1417793100791,"tags":["php","Composer","laravel","cmd.exe"],"description":"在 Windows 下使用 Larave 框架做开发，从 Composer 到 artisan 总是避免不了和 cmd.exe 打交道，系统默认的命令行界面却是不怎么好看，且每行显示的字符数是做了限制。伟大的 cmd.exe ，就是这么任性！","draft":false,"cover":false,"path":"/blogs/2014/configure-the-cmd","slug":"2014/configure-the-cmd"},"next":{"title":"Bringing Whoops Back to Laravel 5","author":"高国良","type":"posts","series":false,"date":1426151160791,"tags":["laravel","php"],"description":"You might be missing the \"prettier\" Whoops error handler from Laravel 4. If so, here's how to bring it back.","draft":false,"cover":false,"path":"/blogs/2015/bringing-whoops-back-to-laravel-5","slug":"2015/bringing-whoops-back-to-laravel-5"}},"__N_SSG":true}