{"pageProps":{"id":["posts","2014","nginx-php-windows"],"post":{"id":["posts","2014","nginx-php-windows"],"contentHtml":"<h2 id=\"hash-开始前的准备\">开始前的准备</h2>\n<p>PHP安装包下载：<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://windows.php.net/downloads/releases/php-5.5.14-Win32-VC11-x86.zip\">http://windows.php.net/downloads/releases/php-5.5.14-Win32-VC11-x86.zip</a></p>\n<p>Nginx 下载地址：<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://nginx.org/download/nginx-1.6.0.zip\">http://nginx.org/download/nginx-1.6.0.zip</a></p>\n<p>RunHiddenConsole 下载：<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://www.yx.lvruan.com:8080/uploadFile/2012/RunHiddenConsole.zip\">http://www.yx.lvruan.com:8080/uploadFile/2012/RunHiddenConsole.zip</a></p>\n<p>注：下载时一定选择windows版本</p>\n<h2 id=\"hash-约定\">约定</h2>\n<p>安装目录：C:/service/</p>\n<p>PHP目录：C:/service/php</p>\n<p>web目录：C:/service/wwwroot</p>\n<p>nginx目录：C:/service/nginx</p>\n<p>PHP版本：php-5.5.14-Win32-VC11-x86</p>\n<p>nginx版本：nginx/Windows-1.6.0</p>\n<h2 id=\"hash-安装-PHP\">安装 PHP</h2>\n<p>1、解压下载到的安装包到C:/service/php</p>\n<p>2、修改配置文件，由于是测试环境，复制php.ini-development 并打开编辑如下几个地方。</p>\n<div class=\"remark-highlight\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token comment\">;设置以下几个选项为1</span>\n<span class=\"token key attr-name\">cgi.force_redirect</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">1</span>\n<span class=\"token key attr-name\">cgi.fix_pathinfo</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">1</span>\n<span class=\"token key attr-name\">fastcgi.impersonate</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">1</span>\n<span class=\"token key attr-name\">cgi.rfc2616_headers</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">1</span>\n\n<span class=\"token comment\">;配置扩展库目录</span>\n<span class=\"token key attr-name\">extension_dir</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">\"<span class=\"token inner-value\">C:service\\php\\ext</span>\"</span>\n\n<span class=\"token comment\">;开启一些常用的扩展库，去掉分行即可</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_pdo.dll</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_pdo_mysql.dll</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_gd2.dll</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_mbstring.dll</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_mysql.dll</span>\n<span class=\"token key attr-name\">extension</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">php_mysqli.dll</span>\n</code></pre></div>\n<p>3、保存配置文件为php.ini</p>\n<h2 id=\"hash-安装-nginx\">安装 nginx</h2>\n<p>1、解压Nginx到C:/service/nginx目录</p>\n<p>2、配置nginx以FastCfi方式运行PHP脚本，打开C:/service/nginx/conf/nginx.conf</p>\n<div class=\"remark-highlight\"><pre class=\"language-conf\"><code class=\"language-conf\">location / {\n    root html;\n    index index.html index.htm;\n}\n\n#修改为\n\nlocation / {\n    root   c:/service/wwwroot;\n    index  index.html index.htm;\n}\n\n#找到章节 pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 修改如下\nlocation ~ \\.php$ {\n    root           c:/service/wwwroot;\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_index  index.php;\n    fastcgi_param  SCRIPT_FILENAME  c:/service/wwwroot$fastcgi_script_name;\n    include        fastcgi_params;\n}</code></pre></div>\n<h2 id=\"hash-启动运行环境\">启动运行环境</h2>\n<p>1、启动fast-cgi</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">php-cgi.exe -b <span class=\"token number\">127.0</span>.0.1:9000 -c c:/service/php/php.ini\n</code></pre></div>\n<p>2、启动nginx，双击c:/service/nginx/nginx.exe即可</p>\n<p>3、新建PHP脚本文件保存为index.php，内容如下</p>\n<div class=\"remark-highlight\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&#x3C;?php</span>  <span class=\"token function\">phpinfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span>\n</code></pre></div>\n<p>4、浏览器输入<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://127.0.0.1,%E5%A6%82%E6%9E%9C%E7%8E%B0%E5%AE%9EPHP%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%88%99%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F%E3%80%82\">http://127.0.0.1,如果现实PHP信息，则环境配置成功。</a></p>\n<h2 id=\"hash-建立快速启动与关闭脚本\">建立快速启动与关闭脚本</h2>\n<p>nginx的启动双击一下就可以，php fast-CGI启动就比较麻烦了，要敲一堆的参数，刻意通过建立批处理脚本来应对这个问题。该脚本需要用到RunHiddenConsole.exe</p>\n<p>复制RunHiddenConsole.exe文件到C:\\service\\下，然后在目录下新建 start_server.bat 和stop_server.bat</p>\n<p>启动服务器-start_server.bat</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo offecho starting PHP FastCGI<span class=\"token punctuation\">..</span>.RunHiddenConsole c:/service/php/php-cgi.exe -b <span class=\"token number\">127.0</span>.0.1:9000 -c c:/service/php/php.iniecho starting Nginx<span class=\"token punctuation\">..</span>.c:/service/nginx/nginx.exe\n</code></pre></div>\n<p>关闭服务 -stop_server.bat</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">@echo offecho Stopping nginx<span class=\"token punctuation\">..</span>.taskkill /F /IM nginx.exe <span class=\"token operator\">></span> nulecho Stopping PHP FastCGI<span class=\"token punctuation\">..</span>.taskkill /F /IM php-cgi.exe <span class=\"token operator\">></span> nulexit \n</code></pre></div>\n<h2 id=\"hash-总结\">总结</h2>\n<p>至此，php+nginx的配置结束了，我们可以把service 文件就打个包，如果要在另外一台电脑使用，可以直接解压到C盘，然后用我们的批处理文件启动即可。</p>\n","words":2068,"toc":[{"depth":2,"value":"开始前的准备","id":"hash-开始前的准备"},{"depth":2,"value":"约定","id":"hash-约定"},{"depth":2,"value":"安装 PHP","id":"hash-安装-PHP"},{"depth":2,"value":"安装 nginx","id":"hash-安装-nginx"},{"depth":2,"value":"启动运行环境","id":"hash-启动运行环境"},{"depth":2,"value":"建立快速启动与关闭脚本","id":"hash-建立快速启动与关闭脚本"},{"depth":2,"value":"总结","id":"hash-总结"}],"title":"nginx+php 在windows下的简单配置安装","author":"高国良","type":"posts","series":false,"date":"2014-07-12T23:26:00.791Z","tags":["php","Apache","Nginx"],"description":"nginx+php 在windows下的简单配置安装","draft":false,"cover":false},"prev":{"title":"MySql 管理操作常用命令","author":"高国良","type":"posts","series":false,"date":1404956640791,"tags":["mysql","password"],"description":"登录、权限、用户、密码","draft":false,"cover":false,"path":"/blogs/2014/common-commands-for-mysql","slug":"2014/common-commands-for-mysql"},"next":{"title":"JQuery 滚动条插件 perfect-scrollbar","author":"Gauliang","type":"posts","series":false,"date":1406193000791,"tags":[],"description":"I worked on a personal project recently, and I was trying to find the jQuery scrollbar plugin that's perfect. But there was no perfect scrollbar plugin. That's why I decided to make one.","draft":false,"cover":false,"path":"/blogs/2014/jquery-perfect-scrollbar","slug":"2014/jquery-perfect-scrollbar"}},"__N_SSG":true}