{"pageProps":{"id":["posts","2015","work-with-gulp+build-a-basic-front-end-automation-development-environment"],"post":{"id":["posts","2015","work-with-gulp+build-a-basic-front-end-automation-development-environment"],"contentHtml":"<p>通过前面几节的准备工作，对于 npm、node、gulp 应该已经有了基本的认识，本节主要介绍如何构建一个基本的前端自动化开发环境。\n下面将逐步构建一个可以自动编译 sass 文件、压缩 javascript 文件、多终端多浏览器同步测试的开发环境，并且还可以通过 piblish 命令对项目下的文件进行打包操作。</p>\n<h2 id=\"hash-一、创建目录结构\">一、创建目录结构</h2>\n<p>建立如下目录结构，learn-gulp 作为我们的项目根目录。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">learn-gulp/\n├── app/\n│   ├── sass/\n│   │   └─ main.scss\n│   ├── scripts/\n│   │   └─ javascript.js\n│   └── index.html\n├── dist/\n└── release/\n</code></pre></div>\n<p>app 为工作目录，所有操作都在该目录下进行。gulp 检测到文件变动会自动对文件进行处理并分发至 dist 目录。</p>\n<p>dist 目标文件目录，这里是编译、压缩过的文件。</p>\n<p>release 可以发布至服务器的文件。</p>\n<h2 id=\"hash-二、初始化npm软件包信息\">二、初始化npm软件包信息</h2>\n<p>在learn-gulp 目录下执行 npm init。这一步主要是创建一个 package.json 文件，便于与开发团队其他成员分享当前环境信息。</p>\n<p>运行 npm init 会要求输入项目名称、版本号、描述、入口程序名称、关键字、作者、license 等信息，根据实际情况输入即可。下面是我输入相关信息后生成的 package.json 文件，供参考：</p>\n<div class=\"remark-highlight\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fedis\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.4\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fedis - Front-End development integration solution\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"gulp\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"sass\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"browser-sync\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"style\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"html\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"kelsen\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"bugs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"repository\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"git\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>注意：部分选项可以不填写，如 git 仓库选项。</p>\n<h2 id=\"hash-三、安装-npm-软件包\">三、安装 npm 软件包</h2>\n<p>通过命令 npm install package-name 安装 npm 软件包，建议带上--save 参数，这样就会把你安装的软件都记录在dependencies 字段下，便于分享你的开发环境给其他人。关于 install 以及--save 参数的相关信息请参考<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://www.cnblogs.com/kelsen/p/4947859.html\">NPM 入门 - 基础使用</a>。</p>\n<p>下面列出了要安装的软件包</p>\n<div class=\"remark-highlight\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser-sync\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.10.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"browsersync-ssi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.2.4\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"gulp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.9.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"gulp-concat\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.6.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"gulp-minify\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.5\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"gulp-plumber\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.0.1\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"gulp-sass\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.1.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"gulp-zip\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^3.0.2\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>这些软件包的基本介绍请参考<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://www.cnblogs.com/kelsen/p/4643762.html\">常用 Gulp 插件汇总 —— 基于 Gulp 的前端集成解决方案（三）</a>。</p>\n<h2 id=\"hash-四、构建-gulp-任务\">四、构建 gulp 任务</h2>\n<p>安装完所有软件包后，在项目目录 learn-gulp 中新建一个javascript文件，命名为 gulpfile.js ，在该文件中定义任务。如果要了解更详细的有关 <strong>任务</strong> 的信息，请参考<a target=\"_blank\" target=\"_blank\" class=\"ext-link\" href=\"http://www.cnblogs.com/kelsen/p/4611102.html\">执行 $Gulp 时发生了什么 —— 基于 Gulp 的前端集成解决方案（二）</a>。</p>\n<p>1、加载 gulp 插件。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'use strict'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> gulp        <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    browserSync <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'browser-sync'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">SSI</span>         <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'browsersync-ssi'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    concat      <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-concat'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    minify      <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-minify'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    plumber     <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-plumber'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    sass        <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-sass'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    zip         <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gulp-zip'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>这里注意，第一行的'use strict';</p>\n<p>2、构建一个处理静态文件的 server ，并监听工作目录，当工作目录有文件变化时立即进行相关操作并执行 browserSync.reload重新加载页面。</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\">gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serve'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    browserSync<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">server</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">baseDir</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">middleware</span><span class=\"token operator\">:</span><span class=\"token constant\">SSI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">baseDir</span><span class=\"token operator\">:</span><span class=\"token string\">'./dist'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">ext</span><span class=\"token operator\">:</span><span class=\"token string\">'.shtml'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">version</span><span class=\"token operator\">:</span><span class=\"token string\">'2.10.0'</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">watch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app/scss/**/*.scss\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'sass'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">watch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app/scripts/**/*.js\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">watch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app/**/*.html\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">watch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/**/*.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span>browserSync<span class=\"token punctuation\">.</span><span class=\"token property-access\">reload</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>如有疑问可参考官网文档：browsersync.io</p>\n<p>3、编译 sass 文件、并自动注入到浏览器</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Compile sass into CSS &#x26; auto-inject into browsers</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sass'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword control-flow\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app/scss/**/*.scss\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>sass<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> sass<span class=\"token punctuation\">.</span><span class=\"token property-access\">logError</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">outputStyle</span><span class=\"token operator\">:</span><span class=\"token string\">\"compact\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/styles\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>browserSync<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>这里需要注意app/scss/**/*.scss ，是app/scss/ 目录下所有SCSS文件的意思。</p>\n<p>4、压缩 javascript 文件</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// javscript files operate</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'app/scripts/**/*.js'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">minify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/scripts\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>browserSync<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>对 learn-gulp/app/scripts/ 下的所有 javascript 文件进行压缩处理并分发至learn-gulp/dist/scripts/ 目录下，每个文件都会对应的生成相应的压缩文件, 如 file.js &#x26; file.min.js</p>\n<p>5、处理 html 文件</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\">gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword control-flow\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"app/*.html\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>        \n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>browserSync<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>这里并未对 html 文件做任何改动，你可以根据实际情况进行一些操作。</p>\n<p>6、打包发布目标文件</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// publish</span>\ngulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'publish'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">src</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dist/**/*'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">plumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span><span class=\"token function\">zip</span><span class=\"token punctuation\">(</span><span class=\"token string\">'publish.zip'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">pipe</span><span class=\"token punctuation\">(</span>gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">dest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'release'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>该任务负责把 learn-gulp/dist 目录下的文件打包成一个 zip 文件并分发至 learn-gulp/release 目录下。</p>\n<p>运行命令 <em>$ gulp publish</em> 可执行该任务。</p>\n<p>7、编辑默认任务</p>\n<div class=\"remark-highlight\"><pre class=\"language-js\"><code class=\"language-js\">gulp<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">task</span><span class=\"token punctuation\">(</span><span class=\"token string\">'default'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'html'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'serve'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>default 任务是运行 gulp 时执行的第一个任务。我们通过 default 任务来执行 serve 任务。</p>\n<h2 id=\"hash-五、开始工作\">五、开始工作</h2>\n<p>1、运行 gulp 命令，如果没有异常 gulp 就已经开始工作了，浏览器会自动打开。</p>\n<p>2、打开 learn-gulp/app/scss/main.scss 输入如下内容</p>\n<div class=\"remark-highlight\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.fedis-main</span>\n<span class=\"token selector\"></span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token function\">linear-gradient</span><span class=\"token punctuation\">(</span><span class=\"token number\">135</span><span class=\"token unit\">deg</span><span class=\"token punctuation\">,</span> <span class=\"token hexcode color\">#573e81</span><span class=\"token punctuation\">,</span> <span class=\"token hexcode color\">#133259</span> <span class=\"token number\">40</span><span class=\"token unit\">%</span><span class=\"token punctuation\">,</span> <span class=\"token hexcode color\">#133259</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#FFF</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>    \n    <span class=\"token selector\">h1</span><span class=\"token punctuation\">{</span><span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span><span class=\"token unit\">em</span><span class=\"token punctuation\">;</span> <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> Arial<span class=\"token punctuation\">,</span> Helvetica<span class=\"token punctuation\">,</span> sans-serif<span class=\"token punctuation\">;</span> <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span><span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.footer</span><span class=\"token punctuation\">{</span><span class=\"token property\">color</span><span class=\"token punctuation\">:</span><span class=\"token hexcode color\">#888</span> <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>当按下 Ctrl+S 保存时，sass 任务会自动执行，执行完成后 learn-gulp/dist/styles/ 目录下会生成css文件 main.css</p>\n<p>3、打开编辑器在 learn-gulp/app/index.html 文件中输入下面内容</p>\n<div class=\"remark-highlight\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&#x3C;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>title</span><span class=\"token punctuation\">></span></span>Welcome - Fedis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//cdn.bootcss.com/font-awesome/4.4.0/css/font-awesome.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>styles/main.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>row<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>col-md-12<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jumbotron text-center fedis-main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>h1</span><span class=\"token punctuation\">></span></span>Fedis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>h1</span><span class=\"token punctuation\">></span></span>                    \n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span><span class=\"token punctuation\">></span></span>Front-End development integration solution<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>small</span><span class=\"token punctuation\">></span></span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>btn btn-success<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://shang.qq.com/wpa/qunwpa?idkey=1aab8e1fc1e992b7390185551e84701163bb9dbdc32a769b185d9f8fd6e70262<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>_blank<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>i</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fa fa-qq<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>i</span><span class=\"token punctuation\">></span></span>加入Q 群<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>br</span><span class=\"token punctuation\">></span></span>221702761<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>a</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>small</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>hr</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>footer text-center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>small</span><span class=\"token punctuation\">></span></span>Fedis 1.0.0 · Created by Kelsen<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>small</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n    \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>scripts/javascript.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>html</span><span class=\"token punctuation\">></span></span>\n</code></pre></div>\n<p>此时按下Ctrl+S 后 learn-gulp/dist/ 下相应位置的 index.html 文件将被新版本替换，紧接着浏览器会自动显示最新效果。</p>\n","words":5067,"toc":[{"depth":2,"value":"一、创建目录结构","id":"hash-一、创建目录结构"},{"depth":2,"value":"二、初始化npm软件包信息","id":"hash-二、初始化npm软件包信息"},{"depth":2,"value":"三、安装 npm 软件包","id":"hash-三、安装-npm-软件包"},{"depth":2,"value":"四、构建 gulp 任务","id":"hash-四、构建-gulp-任务"},{"depth":2,"value":"五、开始工作","id":"hash-五、开始工作"}],"title":"构建一个基本的前端自动化开发环境 —— 基于 Gulp 的前端集成解决方案（四）","author":"高国良","type":"posts","series":false,"date":"2015-11-25T08:25:00.791Z","tags":["gulp","sass","npm"],"description":"在对于 npm、node、gulp 有了基本的认识之后，本文主要介绍如何构建一个基本的前端自动化开发环境。下面将逐步构建一个可以自动编译 sass 文件、压缩 javascript 文件、多终端多浏览器同步测试的开发环境，并且还可以通过 piblish 命令对项目下的文件进行打包操作。","draft":false,"cover":false},"prev":{"title":"网络原因导致 npm 软件包 node-sass/gulp-sass 安装失败的处理办法","author":"高国良","type":"posts","series":false,"date":1447884420791,"tags":["sass","npm"],"description":"如果你正在构建一个基于 gulp 的前端自动化开发环境，那么极有可能会用到 gulp-sass。","draft":false,"cover":false,"path":"/blogs/2015/node-sass-gulp-sass-installation-failure","slug":"2015/node-sass-gulp-sass-installation-failure"},"next":{"title":"Linux 内核概述 - Linux Kernel","author":"高国良","type":"posts","series":false,"date":1472217300791,"tags":["linux","Kernel","C"],"description":"Linux 内核学习笔记整理。 Unix unix 已有40历史，但计算机科学家仍认为其是现存操作系统中最大和最优秀的系统，它已成为一种传奇的存在，历经时间的考验却依然声名不坠。 1973 年，在用 C 语言重写了 Unix 系统后，大量的Unix衍生版本开始出现，许多公司把 unix 移植到新的机","draft":false,"cover":false,"path":"/blogs/2016/linux-kernel","slug":"2016/linux-kernel"}},"__N_SSG":true}