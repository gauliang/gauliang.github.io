{"pageProps":{"id":["posts","2020","reset-password"],"post":{"id":["posts","2020","reset-password"],"contentHtml":"<div class=\"image-widget\"><img src=\"/attachments/posts/2020/reset-password.files/password_security_feature\" alt=\"\"></div>\n<h2 id=\"hash-1、MySql-5-7\">1、MySql 5.7</h2>\n<p>本节介绍如何重置 MySql 5.7 系统 root 用户密码。</p>\n<p><strong>首选，以安全模式登录</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Stop MySQL</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">service</span> mysql stop\n\n<span class=\"token comment\"># Make MySQL service directory.</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p /var/run/mysqld\n\n<span class=\"token comment\"># Give MySQL user permission to write to the service directory.</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> mysql:mysql /var/run/mysqld\n\n<span class=\"token comment\"># Start MySQL manually, without permission checks or networking.</span>\n<span class=\"token function\">sudo</span> mysqld_safe --skip-grant-tables <span class=\"token operator\">&#x26;</span>\n\n<span class=\"token comment\"># Log in without a password.</span>\nmysql -u root\n</code></pre></div>\n<p><strong>现在可以修改密码</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">UPDATE mysql.user SET <span class=\"token assign-left variable\">authentication_string</span><span class=\"token operator\">=</span>PASSWORD<span class=\"token punctuation\">(</span><span class=\"token string\">'NEW-PASSWORD'</span><span class=\"token punctuation\">)</span>, <span class=\"token assign-left variable\">plugin</span><span class=\"token operator\">=</span><span class=\"token string\">'mysql_native_password'</span> WHERE <span class=\"token assign-left variable\">User</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span> <span class=\"token punctuation\">;</span>\nEXIT<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><strong>重启数据库，使配置生效</strong></p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Turn off MySQL.</span>\n<span class=\"token function\">sudo</span> mysqladmin -S /var/run/mysqld/mysqld.sock <span class=\"token function\">shutdown</span>\n\n<span class=\"token comment\"># Start the MySQL service normally.</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">service</span> mysql start\n</code></pre></div>\n<h2 id=\"hash-2、Gitlab\">2、Gitlab</h2>\n<p>本节介绍如何重置 Gitlab 系统 root 用户密码，您需要使用具备服务器 root 权限的账号登录服务器，并启动 Ruby on Rails 控制台：</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">gitlab-rails console production\n</code></pre></div>\n<p>待控制台加载完毕，通过搜索电子邮件或用户名等方法找到您要修改的账号。</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">user <span class=\"token operator\">=</span> User.where<span class=\"token punctuation\">(</span>id: <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>.first\n\n<span class=\"token comment\">## 或者</span>\nuser <span class=\"token operator\">=</span> User.find_by<span class=\"token punctuation\">(</span>email: <span class=\"token string\">'admin@local.host'</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>找出用户以后，可以更改其密码：</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">user.password <span class=\"token operator\">=</span> <span class=\"token number\">12345678</span>\nuser.password_confirmation <span class=\"token operator\">=</span> <span class=\"token number\">12345678</span>\n</code></pre></div>\n<p>最后，保存上面的更改，即可使用新密码登录。</p>\n","words":1008,"toc":[{"depth":2,"value":"1、MySql 5.7","id":"hash-1、MySql-5-7"},{"depth":2,"value":"2、Gitlab","id":"hash-2、Gitlab"}],"title":"常用系统 root 密码重置","date":"2020-01-21T14:44:48.000Z","draft":false,"description":"本文介绍如何重置各类常用业务系统的超级管理员账号密码，如 MySQL、Gitlab 等。","type":"posts","tags":["MySQL","Gitlab","handbook"],"series":false,"author":"Gl","cover":"password_security_feature.png"},"prev":{"title":"Ubuntu 18.04 安装 Java 环境 - OpenJDK","date":1579537208000,"draft":false,"description":"Java 和 JVM（Java 的虚拟机）被广泛使用，本文介绍如何使用 apt-get 安装不同版本的 Open JRE 和 Open JDK。JRE 仅用于提供 Java 应用程序执行环境，如果要编译 Java 应用程序，则要安装 JDK。","type":"posts","tags":["Java"],"series":false,"author":"Gl","cover":false,"path":"/blogs/2020/how-to-install-java-with-apt-get-on-ubuntu","slug":"2020/how-to-install-java-with-apt-get-on-ubuntu"},"next":{"title":"在 Linux 和 Windows 平台安装 Docker CE","date":1579681942000,"draft":false,"description":"Docker 是一个用于开发、交付和运行应用程序的开放平台。Docker 使您能够将应用程序与基础架构分开，以与管理应用程序相同的方式来管理基础架构，从而快速交付软件。通过利用 Docker 快速交付、测试和部署代码的方法，您可以大大缩短编写代码和在生产环境中运行代码之间的时间。","type":"posts","tags":["docker"],"series":false,"author":"Gl","cover":false,"path":"/blogs/2020/Install-docker-engine","slug":"2020/Install-docker-engine"}},"__N_SSG":true}